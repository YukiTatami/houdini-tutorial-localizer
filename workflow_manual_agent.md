# Vimeo動画翻訳ワークフロー - ファイル操作不可AIエージェント用

## 🤖 AIエージェントが把握すべき前提（必須）
このファイルはAIエージェントが理解しやすい形式で書かれています。編集する場合はこのルールを守る必要があります。

## 👨‍💻 AIエージェント実行指示

**対象**: ファイル操作toolが使用不可、ガイダンス提供のみのAIエージェント

### 🎯 ワークフロー概要
Houdiniチュートリアルシリーズ（複数動画・Vimeo埋め込み）から日本語学習支援資料を手動作成支援

**成果物**:
- 各チャプター用日本語翻訳字幕（SRT形式）
- チャプター別動画同期型学習ガイド（MD + HTML形式、初出ノード詳細解説付き）

**所要時間**: 1チャプターあたり約15-20分（例: Project Skylarkシリーズ6チャプター = 約2-3時間）

### STEP 0: 初期診断・ワークフロー開始

#### 0-1: エージェント能力確認
```
必要ツール: Write, Edit, LS, Read
確認結果: MANUAL（ガイダンス提供のみ）
```

#### 0-2: ワークフロー概要説明
ユーザーに以下の概要を説明：

**🎯 このワークフローで実現すること**:
```
📽️ 複数動画シリーズ → 📚 体系的日本語学習資料の手動作成支援

成果物:
✅ 各チャプター日本語翻訳字幕（SRT形式）
✅ チャプター別動画同期型学習ガイド（MD + HTML形式、初出ノード詳細解説付き）

所要時間: 1チャプターあたり約15-20分
例: Project Skylarkシリーズ6チャプター = 約2-3時間
```

**🔄 処理の流れ**:
```
STEP 1: 環境準備（シリーズ全体フォルダ構造手動作成指示）
STEP 2: チャプター選択・字幕取得準備
STEP 3: JavaScript字幕取得（チャプターごとブラウザ実行ガイド）
STEP 4: AI翻訳実行（エージェントがプロンプト実行・結果提示）
STEP 5: 学習ガイド生成（エージェントがプロンプト実行・MD+HTML版結果提示）
STEP 6: 次チャプター処理（STEP 2に戻る・進捗管理）
```

**👥 私の役割**:
- シリーズ全体の詳細手順指示とガイダンス提供
- チャプター別プロンプトの実行
- 進捗管理支援・トラブルシューティング
- 段階的確認とチャプター間整合性サポート

**👤 ユーザーの作業**:
- シリーズフォルダ構造・進捗管理ファイルの手動作成
- 各チャプターでのブラウザJavaScript実行
- 英語SRT/翻訳済みSRT/Markdown内容の提供
- エージェント作成結果の手動ファイル保存・進捗更新
- 各ステップ完了確認・次チャプター継続判断

#### 0-3: ユーザー問い合わせ診断
**エージェントからユーザーへの質問**:
```
翻訳対象の詳細情報を教えてください：

Q0: 翻訳対象のURL情報：
- 対象チュートリアルのURL（シリーズページまたは個別動画ページ）：

※エージェントが提供されたURLを調査してシリーズ名・チャプター数・構成を把握します

現在の作業状況を確認させてください：

Q1: 以下のフォルダ/ファイルは存在しますか？
□ tutorials/[シリーズ名]/01_raw_data/ (チャプター別フォルダ含む)
□ tutorials/[シリーズ名]/03_learning_guide/chapters/ (チャプター別ガイドフォルダ)
□ tutorials/[シリーズ名]/04_progress/ (進捗管理フォルダ)
□ progress_tracker.json (シリーズ進捗ファイル)
□ 各チャプターの字幕ファイル (transcript_*.srt)

Q2: 処理対象と開始点を教えてください：
A) 新規シリーズ開始 (環境準備から)
B) 既存シリーズ継続 (特定チャプターから)
C) 特定チャプターのみ処理 (字幕取得/翻訳/ガイド作成)

Q3: 対象シリーズ情報：
- シリーズ名：
- 総チャプター数：
- 処理したいチャプター範囲：
```

### STEP 1: 環境準備

#### 1-1: シリーズ情報確認
ユーザーに質問：
- チュートリアルURL（シリーズページ）の確認
- 作業フォルダの場所確認

#### 1-2: シリーズフォルダ構造作成指示
以下の手順をユーザーに指示：
1. メインフォルダ作成: tutorials/[シリーズ名]/
2. サブフォルダ作成: 
   - 01_raw_data/ (各チャプター用サブフォルダも作成)
   - 03_learning_guide/chapters/ (チャプター別ガイド用)
   - 04_progress/ (進捗管理用)
3. 共通情報ファイルのフォルダ構造・命名規則を参照

#### 1-3: 進捗管理ファイル準備指示
ユーザーに以下を依頼：
- progress_tracker.json の作成（04_progress/フォルダ内）
- 各チャプターの初期ステータス設定
- テキストエディタでJSON形式保存

#### 1-4: 完了確認

### STEP 2: チャプター選択・字幕取得準備

#### 2-1: 処理チャプター選択指示
ユーザーに以下を確認：
1. 進捗管理ファイル(progress_tracker.json)の確認
2. 次に処理するチャプターの選択
3. 特定チャプター指定 or 順次処理の選択

#### 2-2: 選択チャプターの前提条件チェック指示
以下の確認をユーザーに依頼：
1. 対象チャプターURL確認: Vimeo埋め込みページ（SideFX等）
2. 英語字幕の存在確認
3. 動画再生・一時停止の動作確認  
4. 開発者ツール（F12）の利用可能性

### STEP 3: JavaScript字幕取得実行

**⚠️ 重要**: ユーザーがブラウザで実行する作業

#### 3-1: チャプター字幕取得実行手順指示
以下の手順をユーザーに詳細指示：
1. 選択チャプターページで字幕を有効化 → 一度再生 → 一時停止
2. F12 → Console を開く
3. プロジェクトフォルダ内の `scripts/vimeo_subtitle_extractor_step1.js` をテキストエディタで開く
4. ファイル内容を全選択してコピー（Ctrl+A → Ctrl+C）
5. ブラウザのConsoleにペーストして実行（Ctrl+V → Enter）
6. プロジェクトフォルダ内の `scripts/vimeo_subtitle_extractor_step2.js` をテキストエディタで開く
7. ファイル内容を全選択してコピー（Ctrl+A → Ctrl+C）
8. ブラウザのConsoleにペーストして実行（Ctrl+V → Enter）
9. Console出力の「===== COPY THE TEXT BELOW =====」以下のSRTデータをコピー
10. 該当チャプターフォルダのtranscript_{videoId}_{title}_en.srt に貼り付け・保存
11. 進捗管理ファイル(progress_tracker.json)の字幕取得ステータス更新

#### 3-2: トラブルシューティング支援
- セキュリティ警告への対処方法を指示
- JavaScriptエラーの解決方法を提供
- 共通情報ファイルのトラブルシューティングを参照

### STEP 4: AI翻訳実行

#### 4-1: チャプター翻訳元ファイル確認指示
ユーザーに以下を指示：
該当チャプターフォルダのtranscript_{videoId}_{title}_en.srt ファイルをテキストエディタで開く

#### 4-2: シリーズ文脈考慮翻訳実行
1. ユーザーに対象チャプターの英語SRT内容提供を依頼
2. エージェントが共通情報ファイルの翻訳プロンプト（シリーズ文脈対応版）を使用して翻訳実行
3. 翻訳結果をユーザーに提示

#### 4-3: チャプター翻訳ファイル手動保存指示
ユーザーに以下を指示：
1. 翻訳結果をコピー
2. 該当チャプターフォルダのtranscript_{videoId}_{title}_jp.srt に貼り付け・保存
3. SRT形式の維持確認
4. 進捗管理ファイル(progress_tracker.json)の翻訳ステータス更新

### STEP 5: 学習ガイド生成

#### 5-1: チャプター翻訳済み字幕確認
ユーザーに対象チャプターの翻訳済みSRT内容提供を依頼

#### 5-2: チャプター別ノード分析実行
1. ユーザーから翻訳済み字幕を受け取る
2. エージェントが共通情報ファイルのノード分析プロンプト（シリーズ対応版）を使用して分析実行
3. ノード分析結果をユーザーに提示

#### 5-3: チャプター別学習ガイド生成実行
1. エージェントが共通情報ファイルの学習ガイド生成プロンプト（シリーズ対応版）を使用
2. 前ステップのノード分析結果と翻訳済み字幕を組み合わせて学習ガイド生成
3. MD形式の学習ガイドをユーザーに提示

#### 5-4: チャプター学習ガイド(MD)手動保存指示
ユーザーに以下を指示：
1. 学習ガイド結果をコピー
2. 03_learning_guide/chapters/ フォルダに chapter_{章番号}_{チャプター名}_学習ガイド.md で保存
3. ファイル作成確認

#### 5-5: チャプター学習ガイド(HTML)生成実行
1. ユーザーから保存したMarkdownの内容提供を依頼
2. エージェントが共通情報ファイルの学習ガイドHTML変換プロンプトを使用してHTML変換実行
3. HTML結果をユーザーに提示し、同フォルダに chapter_{章番号}_{チャプター名}_学習ガイド.html で保存指示

#### 5-6: 進捗管理ファイル更新指示
ユーザーに以下を指示：
進捗管理ファイル(progress_tracker.json)の学習ガイド(MD版・HTML版)生成ステータス更新

### STEP 6: 次チャプター処理・完了判定

#### 6-1: 処理継続確認指示
ユーザーに以下を確認：
1. 進捗ファイル確認・次処理候補チャプター表示
2. 処理継続の選択肢提示：
   - 次チャプター処理継続（STEP 2に戻る）
   - 処理一時停止
   - シリーズ完了処理

#### 6-2: シリーズ完了時の最終処理指示
全チャプター完了時にユーザーに指示：
1. 進捗ファイルの完了ステータス更新
2. 全チャプター学習ガイドの品質チェック

## 📋 ガイダンス時の注意事項

1. **段階的指示**: 各ステップを細かく分けて指示
2. **確認の徹底**: 各手順完了後にユーザーに確認を取る
3. **エラー対応**: 問題発生時は共通情報ファイルのトラブルシューティングを参照
4. **プロンプト実行**: エージェント自身がプロンプトを実行し、結果をユーザーに提示

## 📂 参照ファイル

- **共通情報**: `workflow_common_resources.md`
  - JavaScriptコード
  - AIプロンプトテンプレート
  - フォルダ構造・命名規則
  - トラブルシューティング

## 💡 ユーザー支援のコツ

1. **視覚的な確認**: フォルダ構造やファイルの存在を画像で確認してもらう
2. **ファイル名の統一**: 命名規則を必ず共有し、一貫性を保つ
3. **進捗の把握**: どこまで完了したかを常に確認
4. **品質チェック**: SRT形式の維持や翻訳品質の確認を促す